<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Feb 13, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>CPD Results</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
        <meta name="Date-Revision-yyyymmdd" content="20120213" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      </head>
  <body class="composite">
    <div id="banner">
                                      <a href="../../../index.html" id="bannerLeft">
                                                <img src="../../../images/logo.png" alt="" />
                </a>
                              <a href="http://maven.apache.org/" id="bannerRight">
                                                <img src="../../../images/apache-maven-project-2.png" alt="" />
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                                     <div class="xright">            <a href="http://maven.apache.org/" class="externalLink">Maven</a>
            |
                <a href="http://www.phpunit.de/" class="externalLink">PHPUnit</a>
            |
                <a href="http://www.stack.nl/~dimitri/doxygen/" class="externalLink">doxygen</a>
            |
                <a href="http://www.phpdoc.org/" class="externalLink">PHPDocumentor</a>
            |
                <a href="../../../index.html">PHP-MAVEN</a>
            |
                <a href="../index.html">Stable</a>
            |
                <a href="../../../branches/2.0-SNAPSHOT/index.html">Latest</a>
              
                                   &nbsp;| Last Published: 2012-02-13
              &nbsp;| Version: 2.0.0-beta-1
            </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                                                   <h5>Main</h5>
                  <ul>
                  <li class="none">
                  <a href="../../../index.html">Welcome</a>
            </li>
                  <li class="none">
                  <a href="../../../install.html">Installation</a>
            </li>
                  <li class="none">
                  <a href="../../../usage.html">Usage</a>
            </li>
                  <li class="none">
                  <a href="../../../downloads.html">Downloads</a>
            </li>
                  <li class="none">
                  <a href="../../../donate.html">Donate</a>
            </li>
                  <li class="none">
                  <a href="../../../aboutus.html">About us</a>
            </li>
                  <li class="none">
                  <a href="../../../help.html">Help wanted</a>
            </li>
                  <li class="none">
                  <a href="http://nexus.php-maven.org" class="externalLink">Repository</a>
            </li>
          </ul>
                       <h5>Tutorial</h5>
                  <ul>
                  <li class="none">
                  <a href="../../../prepare.html">Preperation</a>
            </li>
                  <li class="none">
                  <a href="../../../branches/2.0-SNAPSHOT/php-lib-5min.html">PHP libraries - 5 minute starter guide</a>
            </li>
                  <li class="none">
                  <a href="../../../branches/2.0-SNAPSHOT/php-web-5min.html">PHP web project - 5 minute starter guide</a>
            </li>
                  <li class="none">
                  <a href="../../../migration-1x.html">Migration from PHP-Maven1</a>
            </li>
                  <li class="none">
                  <a href="../../../branches/2.0-SNAPSHOT/tutorials.html">Detailed tutorials and manuals</a>
            </li>
          </ul>
                       <h5>Documentation</h5>
                  <ul>
                  <li class="none">
                  <a href="../../../branches/2.0-SNAPSHOT/tut-documentation.html">Project documentation</a>
            </li>
                  <li class="none">
                  <a href="../../../branches/2.0-SNAPSHOT/tut-lifecycle-deploy.html">Project deployment</a>
            </li>
                  <li class="none">
                  <a href="../../../branches/2.0-SNAPSHOT/tut-lifecycle.html">The lifecycle</a>
            </li>
                  <li class="none">
                  <a href="../../../branches/2.0-SNAPSHOT/plugin-info.html">Plugin Goals</a>
            </li>
                  <li class="none">
                  <a href="../../../license.html">Licence</a>
            </li>
                  <li class="none">
                  <a href="../../../branches/2.0-SNAPSHOT/source-repository.html">Source code</a>
            </li>
                  <li class="none">
                  <a href="../../../branches/2.0-SNAPSHOT/surefire-report.html">Plugin test results</a>
            </li>
          </ul>
                       <h5>Articles</h5>
                  <ul>
                  <li class="none">
                  <a href="../../../tut-zendframework.html">Zend Framework Integration</a>
            </li>
          </ul>
                       <h5>Support</h5>
                  <ul>
                  <li class="none">
                  <a href="http://groups.google.de/group/maven-for-php" class="externalLink">Google group</a>
            </li>
                  <li class="none">
                  <a href="http://trac.php-maven.org" class="externalLink">Trac</a>
            </li>
                  <li class="none">
                  <a href="../../../faq.html">FAQ</a>
            </li>
          </ul>
                                 <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
          <img alt="Built by Maven" src="./images/logos/maven-feather.png"/>
        </a>
                       
                               </div>
      
      <a href="/donate.html"><!--TODO use macros to get the correct site url -->
      <img src="https://www.paypalobjects.com/en_US/DE/i/btn/btn_donateCC_LG.gif" border="0" alt="PayPal - The safer, easier way to pay online!" />
      <img alt="" border="0" src="https://www.paypalobjects.com/de_DE/i/scr/pixel.gif" width="1" height="1" />
      </a>
      
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>CPD Results<a name="CPD_Results"></a></h2><p>The following document contains the results of PMD's  <a class="externalLink" href="http://pmd.sourceforge.net/cpd.html">CPD</a> 4.3.</p></div><div class="section"><h2>Duplications<a name="Duplications"></a></h2><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org\phpmaven\plugin\build\AbstractPhpMojo.java</td><td><a href="./xref/org/phpmaven/plugin/build/AbstractPhpMojo.html#187">187</a></td></tr><tr class="a"><td>org\phpmaven\plugin\report\AbstractPhpReportMojo.java</td><td><a href="./xref/org/phpmaven/plugin/report/AbstractPhpReportMojo.html#192">192</a></td></tr><tr class="b"><td colspan='2'><div><pre>    }

    // methods for IPhpConfigurationMojo
    
    /**
     * Represents the maven project.
     *
     * @return the current maven project.
     */
    @Override
    public MavenProject getProject() {
        return project;
    }

    /**
     * Path to the PHP executable.
     *
     * @return path of the php executable
     */
    @Override
    public String getPhpExecutable() {
        return phpExecutable;
    }

    /**
     * Parameters which should be added to the generated PHP parameters.
     *
     * @return additional arguments for php execution
     */
    @Override
    public String getAdditionalPhpParameters() {
        return additionalPhpParameters;
    }

    /**
     * Where the dependencies should be unpacked to.
     *
     * @return where to store the dependency files
     */
    @Override
    public File getDependenciesTargetDirectory() {
        return this.dependenciesTargetDirectory;
    }

    /**
     * Where the test dependencies should be unpacked to.
     *
     * @return where to store the test dependency files
     */
    @Override
    public File getTestDependenciesTargetDirectory() {
        return this.testDependenciesTargetDirectory;
    }
    
    /**
     * Where the sources should get copied to.
     *
     * @return where the jar inclusion directory is
     */
    @Override
    public File getTargetClassesDirectory() {
        return this.targetClassesDirectory;
    }

    /**
     * The target directory where to copy the test sources to.
     *
     * @return where the test-jar inclusion directory is
     */
    @Override
    public File getTargetTestClassesDirectory() {
        return this.targetTestClassesDirectory;
    }

    /**
     * Returns if include errors should be ignored.
     *
     * @return if include errors should be ignored
     */
    @Override
    public boolean isIgnoreIncludeErrors() {
        return ignoreIncludeErrors;
    }

    /**
     * Returns if output from the PHP executable should be logged.
     *
     * @return if php output will be printed to the log
     */
    @Override
    public boolean isLogPhpOutput() {
        return logPhpOutput;
    }

    /**
     * The file of the temporary script used to execute temporary php actions.
     * 
     * @return temporary script filename.
     */
    @Override
    public File getTemporaryScriptFilename() {
        return this.temporaryScriptFile;
    }

    /**
     * Returns the Project builder to be used.
     * @return the project builder
     */
    @Override
    public ProjectBuilder getMavenProjectBuilder() {
        return this.mavenProjectBuilder;
    }
    
    /**
     * Returns the The Maven session to be used.
     * @return the maven session.
     */
    @Override
    public MavenSession getSession() {
        return this.session;
    }
    
    // end of methods for IPhpConfigurationMojo
    
    // methods for IPhpWalkConfigurationMojo
    
    /**
     * Returns files and directories to exclude.
     * @return files and directories to exclude.
     */
    @Override
    public String[] getExcludes() {
        return this.excludes;
    }

    /**
     * Returns files and directories to include.
     * @return files and directories to include.
     */
    @Override
    public String[] getIncludes() {
        return this.includes;
    }

    /**
     * Returns how php files will be identified after the last point.
     * @return how php files will be identified after the last point.
     */
    @Override
    public String getPhpFileEnding() {
        return this.phpFileEnding;
    }</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org\phpmaven\plugin\pear\PearPackageInfo.java</td><td><a href="./xref/org/phpmaven/plugin/pear/PearPackageInfo.html#321">321</a></td></tr><tr class="a"><td>org\phpmaven\plugin\pear\PearPackageInfo.java</td><td><a href="./xref/org/phpmaven/plugin/pear/PearPackageInfo.html#355">355</a></td></tr><tr class="b"><td colspan='2'><div><pre>    private void parseOptionalDep(final LineTokenizer tokenizer, String token) {
        if (token.startsWith(PROLOG_PACKAGE))
        {
            String packageName = token.substring(PROLOG_PACKAGE.length()).trim(); // maybe a line feed before the package name starts
            if (packageName.length() == 0)
            {
                packageName = tokenizer.nextToken().trim();
            }
            if (tokenizer.hasMoreTokens())
            {
                String token2 = tokenizer.nextToken().trim();
                if (token2.length() == 0) token2 = tokenizer.nextToken().trim(); // maybe an empty line that we fetched first
                if (token2.startsWith(PROLOG_PACKAGE_VERSION))
                {
                    final String version = token2.substring(PROLOG_PACKAGE_VERSION.length(), token2.indexOf(&quot; &quot;, PROLOG_PACKAGE_VERSION.length()));
                    this.pkgDependenciesOptional.add(new PearDependency(packageName, version));</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org\phpmaven\plugin\build\PhpTest.java</td><td><a href="./xref/org/phpmaven/plugin/build/PhpTest.html#313">313</a></td></tr><tr class="a"><td>org\phpmaven\plugin\build\PhpTest.java</td><td><a href="./xref/org/phpmaven/plugin/build/PhpTest.html#389">389</a></td></tr><tr class="b"><td colspan='2'><div><pre>            executeTest(file, targetFile);
        }
   
        getLog().info(&quot;\n\nResults :\n\n&quot;);
   
        int completeTests = 0;
        int completeFailures = 0;
        int completeErrors = 0;
   
        for (SurefireResult surefireResult : surefireResults) {
            completeTests += surefireResult.getTests();
            completeFailures += surefireResult.getFailure();
            completeErrors += surefireResult.getErrors();
        }
   
        getLog().info(&quot;\n\nTests run: &quot; + completeTests
            + &quot;, Failures: &quot; + completeFailures
            + &quot;, Errors: &quot; + completeErrors + &quot;\n&quot;);
   
        if (completeErrors != 0 || completeFailures != 0) {
            if (this.testFailureIgnore) {
                getLog().info(IGNORING_TEST_FAILURES_TEXT);
            } else {
                throw new UnitTestCaseFailureException(completeErrors, completeFailures);
            }
        }
    }

    /**
     * Performs the testing by performing only one phpunit invocation.
     * 
     * @param files files to test.
     * @throws IOException thrown if there were io errors.
     * @throws PhpException thrown on php failures.
     * @throws MojoExecutionException thrown if on errors.
     * @throws UnitTestCaseFailureException thrown on unit testing failures.
     */
    private void doTestingSingleInvocation(final Iterable&lt;File&gt; files) throws IOException,</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org\phpmaven\plugin\pear\PearPackageInfo.java</td><td><a href="./xref/org/phpmaven/plugin/pear/PearPackageInfo.html#170">170</a></td></tr><tr class="a"><td>org\phpmaven\plugin\pear\PearPackageInfo.java</td><td><a href="./xref/org/phpmaven/plugin/pear/PearPackageInfo.html#245">245</a></td></tr><tr class="b"><td colspan='2'><div><pre>                    final int indexOf = token.indexOf(&quot;&gt;&quot;);
                    maintainer.setEmail(token.substring(1, indexOf));
                    if (indexOf &lt; token.length() - 1)
                    {
                        final String sub = token.substring(indexOf + 1).trim();
                        if (sub.startsWith(&quot;(&quot;) &amp;&amp; sub.endsWith(&quot;)&quot;))
                        {
                            maintainer.setRole(sub.substring(1, sub.length() - 1));
                        }
                        else
                        {
                            throw new IllegalStateException(&quot;Unable to parse email and role from &quot; + tokenUntrimmed);
                        }
                    }
                }
                else
                {
                    maintainer.setName(token);</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org\phpmaven\plugin\php\PhpMojoHelper.java</td><td><a href="./xref/org/phpmaven/plugin/php/PhpMojoHelper.html#417">417</a></td></tr><tr class="a"><td>org\phpmaven\plugin\php\PhpMojoHelper.java</td><td><a href="./xref/org/phpmaven/plugin/php/PhpMojoHelper.html#452">452</a></td></tr><tr class="b"><td colspan='2'><div><pre>    public void prepareCompileDependencies() throws IOException, PhpException {
        final List&lt;String&gt; packedElements = new ArrayList&lt;String&gt;();
        @SuppressWarnings(&quot;unchecked&quot;)
        final Set&lt;Artifact&gt; deps = this.project.getArtifacts();
        for (final Artifact dep : deps) {
            this.log.debug(&quot;dependency &quot; + 
                dep.getGroupId() + &quot;:&quot; + 
                dep.getArtifactId() + &quot;:&quot; +
                dep.getVersion() + &quot;:&quot; +
                dep.getScope() + &quot;@&quot; +
                dep.getFile().getAbsolutePath());
            if (Artifact.SCOPE_TEST.equals(dep.getScope())) {</pre></div></td></tr></table></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        &#169;            2012
                
                          - <a href="http://maven.apache.org/privacy-policy.html">Privacy Policy</a>.
        Apache Maven, Maven, Apache, the Apache feather logo, and the Apache Maven project logos are trademarks of The Apache Software Foundation.
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
